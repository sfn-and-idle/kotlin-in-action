# 7. ì—°ì‚°ì ì˜¤ë²„ë¡œë”©ê³¼ ê¸°íƒ€ ê´€ë¡€

# 7. ì—°ì‚°ì ì˜¤ë²„ë¡œë”©ê³¼ ê¸°íƒ€ ê´€ë¡€

- ìë°”ì—ì„œëŠ” ìë°” ì–¸ì–´ë‘ í‘œì¤€ ë¼ì´ë¸ŒëŸ¬ë¦¬ê°€ í˜¸ë  ìˆ˜ ìˆëŠ” ë¶€ë¶„ë“¤ì´ ìˆë‹¤
    - iterable interface <=> forë¬¸
    - AutoCloseable <=> try-with-resources
- ì½”í‹€ë¦°ì—ì„œ ë¹„ìŠ·í•œ ê¸°ëŠ¥ë“¤ì´ ìˆë‹¤
    - í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•´ì„œ ì–¸ì–´ë‘ ì—°ë™ ë  ìˆ˜ ìˆëŠ” ë¶€ë¶„
        - plus() <=> +
        - convention(ê´€ë¡€)ë¼ê³  ë¶€ë¥¸ë‹¤
    - ìë°”ì²˜ëŸ¼ íƒ€ì…/ì¸í„°í˜ì´ìŠ¤ë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šê³  í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•œë‹¤
        - ë” ìœ ì—°í•˜ë‹¤
            - ìë°”: ì´ë¯¸ ì •ì˜ëœ í´ë˜ìŠ¤ì— ì¶”ê°€ë¡œ ì¸í„°í˜ì´ìŠ¤ë¥¼ implementí•  ìˆ˜ ì—†ì§€ë§Œ ì½”í‹€ë¦°ì—ì„œëŠ” í™•ì¥í•¨ìˆ˜ë¡œ ê¸°ëŠ¥ì„ ì¶”ê°€í•  ìˆ˜ ìˆë‹¤
- 7ì¥ì—ì„œ ì‚¬ìš©í•  ì˜ˆì œ
    
    ```jsx
    data class Point(val x: Int, val y: Int)
    ```
    

# 7.1 ì‚°ìˆ  ì—°ì‚°ì ì˜¤ë²„ë¡œë”©

- ìë°”
    - ì‚°ìˆ  ì—°ì‚°ì: +, -, *, /, %
    - ë³´í†µ ìˆ«ìë‘ ê°™ì´ ì‚¬ìš©ëœë‹¤, ìŠ¤íŠ¸ë§ë„ +ë¥¼ ì‚¬ìš©í•œë‹¤
- Classì—ì„œë„ ì‚¬ìš©í•  ìˆ˜ ìˆìœ¼ë©´ ìœ ìš©í•˜ë‹¤
    - BitInteger

## 7.1.1 ì´í•­ ì‚°ìˆ  ì—°ì‚° ì˜¤ë²„ë¡œë”©(Binary Arithmetic)

```jsx
data class Point(val x: Int, val y: Int) {
	operator fun plus(other: Point): Point {
		return Point(x + other.x, y + other.y)
	}
}

val p1 = Point(10, 20)
val p2 = Point(30, 40)
println(p1 + p2)
Point(x=40, y=60)

// "operator" keywordì‚¬ìš© í•„ìˆ˜
```

- ì‹¤ì œë¡œ ë‚´ë¶€ì ìœ¼ë¡œëŠ” í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ê²Œ ëœë‹¤
    
    ![Untitled](7%20%E1%84%8B%E1%85%A7%E1%86%AB%E1%84%89%E1%85%A1%E1%86%AB%E1%84%8C%E1%85%A1%2014aa8/Untitled.png)
    
- í™•ì¥í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•´ë„ ëœë‹¤
    
    ```jsx
    operator fun Point.plus(other: Point): Point {
        return Point(x + other.x, y + other.y)
    }
    ```
    
- ì½”í‹€ë¦°ì—ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ì—°ì‚°ìë“¤ì€ ì´ë¯¸ ì •í•´ì ¸ìˆë‹¤(ë„ˆë¬´ ììœ ë¡œì›Œë„ ë¬¸ì œ)
    
    ![Untitled](7%20%E1%84%8B%E1%85%A7%E1%86%AB%E1%84%89%E1%85%A1%E1%86%AB%E1%84%8C%E1%85%A1%2014aa8/Untitled%201.png)
    
- ì—°ì‚°ì ìˆœì„œ/ìš°ì„ ìˆœìœ„ëŠ” ìˆ«ìë¥¼ ì‚¬ìš©í•  ë•Œë‘ ë˜‘ê°™ë‹¤
    - a + b * cëŠ” b*cë¶€í„° ì—°ì‚°ëœë‹¤
    - *, /, %ëŠ” +,-ë³´ë‹¤ ìš°ì„ ìˆœìœ„ê°€ ë†’ë‹¤
- ìë°” í˜¸í™˜ì„±
    - ì½”í‹€ë¦°ì—ì„œ ì •ì˜í•œ ì—°ì‚°ìëŠ” ìë°”ì—ì„œ í˜¸ì¶œí•˜ê¸° ì‰½ë‹¤. ê·¸ëƒ¥ í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ë©´ ëœë‹¤.
    - ìë°”ì—ì„œ ì •ì˜ëœ í•¨ìˆ˜(í˜•ì‹ì´ ë§ì„ê²½ìš° - ì¸ì, íƒ€ì…, í•¨ìˆ˜ëª…) ì½”í‹€ë¦°ì—ì„œ ì—°ì‚°ì ì²˜ëŸ¼ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤. ë§Œì•½ ë§ì¶°ì£¼ê¸° ìœ„í•œ ë³€ê²½ ì‚¬í•­ì´ ìˆë‹¤ë©´ í™•ì¥í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.
- ì—°ì‚°ìë¥¼ ì‚¬ìš©í•  ë•Œ í”¼ì—°ì‚°ìì˜ íƒ€ì…ì€ ë‹¬ë¼ë„ ëœë‹¤
    
    ```jsx
    operator fun Point.times(scale: Double): Point {
        return Point((x * scale).toInt(), (y * scale).toInt())
    }
    
    >>> val p = Point(10, 20)
    >>> println(p * 1.5) // Point * double
    Point(x=15, y=30)
    ```
    
- êµí™˜ ë²•ì¹™(commutability)ëŠ” ë”°ë¡œ ì •ì˜í•´ì¤˜ì•¼í•œë‹¤
    - a * b = b * a
    
    ```jsx
    // Point * Double, Double * Point
    operator fun Double.times(p: Point): Point
    ```
    
- ë¦¬í„´ íƒ€ì…ì´ ë‹¬ë¼ë„ ëœë‹¤
    
    ```jsx
    // Char * Int => String
    operator fun Char.times(count: Int): String {
        return toString().repeat(count)
    }
    >>> println('a' * 3)
    aaa
    ```
    
- operatorí•¨ìˆ˜ë“¤ë„ ì¼ë°˜ í•¨ìˆ˜ ì²˜ëŸ¼ ì˜¤ë²„ë¡œë”©ì´ ê°€ëŠ¥í•˜ë‹¤
    
    <aside>
    ğŸ’¡ ì½”í‹€ë¦°ì—ì„œëŠ” ë¹„íŠ¸ ì—°ì‚°ì„ ìœ„í•œ ë³„ë„ ì—°ì‚°ìë¥¼ ì œê³µí•˜ì§€ ì•ŠëŠ”ë‹¤
    ë¹„íŠ¸ì—°ì‚°ì€ infix callë¬¸ë²•ì„ í†µí•´ì„œ ì§€ì›ì„í•œë‹¤
    
    shlâ€”Signed shift left
    shrâ€”Signed shift right
    ushrâ€”Unsigned shift right
    andâ€”Bitwise and
    orâ€”Bitwise or
    xorâ€”Bitwise xor
    invâ€”Bitwise inversion
    
    `>>> println(0x0F and 0xF0)`
    `0`
    
    `>>> println(0x0F or 0xF0)`
    `255`
    
    `>>> println(0x1 shl 4)`
    `16`
    
    </aside>
    

## 7.1.2 ë³µí•© ëŒ€ì… ì—°ì‚°ì ì˜¤ë²„ë¡œë”©

- +ë¥¼ plusí•¨ìˆ˜ë¥¼ í†µí•´ ì •ì˜í•œë‹¤ë©´ ì½”í‹€ë¦°ì—ì„œ +=ë„ ì§€ì›ì„ í•œë‹¤. +=ë‘ -=ë¬¸ë²•ì€ ë³µí•© ëŒ€ì… ì—°ì‚°ìë¼ê³  ë¶€ë¥¸ë‹¤
- ì˜ˆ
    
    ```jsx
    >>> var point = Point(1, 2)
    >>> point += Point(3, 4)
    >>> println(point)
    Point(x=4, y=6)
    
    // ë‹¤ìŒì€ ìœ„í•˜ê³  ë˜‘ê°™ë‹¤
    point = point + Point(3, 4)
    ```
    
- ë•Œë¡œëŠ” ê°ì²´ ì°¸ì¡° ìì²´ë¥¼ ë³€ê²½í•˜ê¸° ë³´ë‹¤ ê°ì²´ë¥¼ ë³€ê²½ì‹œí‚¤ëŠ”ê²ƒì„ ì›í•œë‹¤
    
    ```jsx
    >>> val numbers = ArrayList<Int>()
    >>> numbers += 42
    >>> println(numbers[0]) // numbersëŠ” ëŠ˜ ì»¬ë ‰ì…˜
    42
    
    // plusAssign -> Unit ====> +=
    // minusAssign
    // timesAssign
    // ...
    
    // ì˜ˆ: ì»¬ë ‰ì…˜
    operator fun <T> MutableCollection<T>.plusAssign(element: T) {
        this.add(element)
    }
    ```
    
- plusí•˜ê³  plusAssignì„ ë‘˜ ë‹¤ ì •ì˜í•˜ë©´ ì»´íŒŒì¼ëŸ¬ê°€ ì˜¤ë¥˜ë¥¼ ë˜ì§„ë‹¤
    
    ![Untitled](7%20%E1%84%8B%E1%85%A7%E1%86%AB%E1%84%89%E1%85%A1%E1%86%AB%E1%84%8C%E1%85%A1%2014aa8/Untitled%202.png)
    
    - ëŒ€ì•ˆ
        - operator functionì„ ì‚¬ìš©í•˜ì§€ ì•Šê³  ê·¸ëƒ¥ functionì„ ì •ì˜í•˜ëŠ”ê²ƒ
        - varì„ ì‚¬ìš©í•˜ì§€ ì•Šê³  valì„ ì‚¬ìš©í•˜ë©´ =ì‚¬ìš©ì€ ë¶ˆê°€
    - ê·œì¹™
        - immutable: plus
        - mutable: plusAssign
- ì»¬ë ‰ì…˜
    - +, -: í•­ìƒ ìƒˆë¡œìš´ ì»¬ë ‰ì…˜ì„ ë¦¬í„´
    - +=, -=: immutableì»¬ë ‰ì…˜ë§Œ ì‚¬ìš© ê°€ëŠ¥
    
    ```jsx
    >>> val list = arrayListOf(1, 2)
    >>> list += 3 // += changes â€œlistâ€.
    >>> val newList = list + listOf(4, 5) // + returns a new list containing all the elements.
    
    >>> println(list)
    [1, 2, 3]
    
    >>> println(newList)
    [1, 2, 3, 4, 5]
    
    ```
    

## 7.1.3 ë‹¨í•­ ì—°ì‚°ì ì˜¤ë²„ë¡œë”©

- ë˜‘ê°™ì´ operatorí•¨ìˆ˜ë¥¼ ì •ì˜í•˜ë©´ ëœë‹¤

```jsx
operator fun Point.unaryMinus(): Point {
    return Point(-x, -y)
}

>>> val p = Point(10, 20)
>>> println(-p)
Point(x=-10, y=-20)
```

![Untitled](7%20%E1%84%8B%E1%85%A7%E1%86%AB%E1%84%89%E1%85%A1%E1%86%AB%E1%84%8C%E1%85%A1%2014aa8/Untitled%203.png)

- ë‹¨í•­ ì—°ì‚°ì
    
    ![Untitled](7%20%E1%84%8B%E1%85%A7%E1%86%AB%E1%84%89%E1%85%A1%E1%86%AB%E1%84%8C%E1%85%A1%2014aa8/Untitled%204.png)
    
- ì»´íŒŒì¼ëŸ¬ê°€ ìë™ìœ¼ë¡œ pre/postë¥¼ ë§Œë“¤ì–´ ì¤€ë‹¤(++a, a++)
- ì˜ˆ(BigDecimal)
    
    ```jsx
    operator fun BigDecimal.inc() = this + BigDecimal.ONE
    >>> var bd = BigDecimal.ZERO
    >>> println(bd++)
    0
    
    >>> println(++bd)
    2
    ```
    

# 7.2 ë¹„êµ ì—°ì‚°ì ì˜¤ë²„ë¡œë”©

ë¹„êµ ì—°ì‚°ì ì˜¤ë²„ë¡œë”©(==, !=, >, <, ...)

## 7.2.1 ë™ë“±ì„± ì—°ì‚°ì: equals

- ==ì€ equalsë¥¼ í˜¸ì¶œí•œë‹¤
    
    ![Untitled](7%20%E1%84%8B%E1%85%A7%E1%86%AB%E1%84%89%E1%85%A1%E1%86%AB%E1%84%8C%E1%85%A1%2014aa8/Untitled%205.png)
    
- aê°€ nullì¸ì§€ í™•ì¸í•˜ê³  ê·¸ë‹¤ìŒì— equalsí•¨ìˆ˜ë¥¼ í˜¸ì¶œí•œë‹¤
- dataí´ë˜ìŠ¤ëŠ” ì»´íŒŒì¼ëŸ¬ê°€ ìë™ìœ¼ë¡œ equalsí•¨ìˆ˜ë¥¼ ìƒì„±í•´ì¤€ë‹¤
    
    ```jsx
    // ==, equals, override (not operator), Any class
    class Point(val x: Int, val y: Int) {
    	// overrideê°€ í™•ì¥í•¨ìˆ˜ ë³´ë‹¤ ìš°ì„ ìˆœìœ„ê°€ ë†’ë‹¤
      override fun equals(obj: Any?): Boolean {
        if (obj === this) return true
        if (obj !is Point) return false
        return obj.x == x && obj.y == y
    	}
    }
    
    >>> println(Point(10, 20) == Point(10, 20))
    true
    >>> println(Point(10, 20) != Point(5, 5))
    true
    >>> println(null == Point(1, 2))
    false
    ```
    

## 7.2.2 ìˆœì„œ ì—°ì‚°ì: compareTo

- ìë°”
    - Comparableì¸í„°í˜ì´ìŠ¤(find max, sorting)
    - ê°ì²´ì¼ ê²½ìš° >, <ì„ ì‚¬ìš©í•  ìˆ˜ ì—†ë‹¤
- ì½”í‹€ë¦°ì—ì„œë„ Comparableì¸í„°í˜ì´ìŠ¤ë¥¼ ì§€ì›í•˜ê³  <,>ì„ ì‚¬ìš©í•  ë•Œ compareToë¥¼ í˜¸ì¶œí•œë‹¤
- p1 < p2ì€ p1.compareTo(p2) < 0í•˜ê³  ê°™ë‹¤
- ì˜ˆì œ
    
    ```kotlin
    class Person(
    	val firstName: String, 
    	val lastName: String
    ) : Comparable<Person> {
    	
    	override fun compareTo(other: Person): Int {
    			// kotlin standard library
    	    return compareValuesBy(this, other,
    	        Person::lastName, Person::firstName)
    	} 
    }
    
    >>> val p1 = Person("Alice", "Smith")
    >>> val p2 = Person("Bob", "Johnson")
    >>> println(p1 < p2)
    false
    ```
    
- ìë°”ì—ì„œ Comparableì¸í„°í˜ì´ìŠ¤ë¥¼ ì§€ì›í•˜ëŠ” í´ë˜ìŠ¤ì´ë©´ ì½”í‹€ë¦°ì—ì„œ ì—°ì‚°ìë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤
    
    ```kotlin
    >>> println("abc" < "bac")
    true
    ```
    

# 7.3 ì»¬ë ‰ì…˜ê³¼ ë²”ìœ„ì— ëŒ€í•´ ì“¸ ìˆ˜ ìˆëŠ” ê´€ë¡€

indexë¥¼ í†µí•´ get,set, containsë“± ì»¬ë ‰ì…˜ì—ì„œ ì‚¬ìš©í•˜ëŠ” ê¸°ëŠ¥ë“¤. operatorì„ í†µí•´ì„œ ì‚¬ìš©ê°€ëŠ¥.

## 7.3.1 ì¸ë±ìŠ¤ë¡œ ì›ì†Œì— ì ‘ê·¼: getê³¼ set

- ì½”í‹€ë¦°ì—ì„œ ë‹¤ìŒ ë¬¸ë²• ì‚¬ìš© ê°€ëŠ¥ collection[index]
    - `val value = map[key]`
- ì‹¤ì œë¡œ indexì—°ì‚°ìëŠ” getí•¨ìˆ˜ë¥¼ ì‚¬ìš©í•œë‹¤
- Point Classì˜ˆì œ
    
    ```kotlin
    operator fun Point.get(index: Int) : Int {
    	return when(index) {
    		0 -> x
    		1 -> y
    		else -> 
    			throw IndexOutOfBoundsException("Invalid coordinate $index")
    	}
    }
    
    >>> val p = Point(10, 20)
    >>> println(p[1])
    20
    ```
    
- operator getí•¨ìˆ˜ë§Œ ì •ì˜í•˜ë©´ ì¸í…ìŠ¤ ì—°ì‚°ìë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤
    
    ![Untitled](7%20%E1%84%8B%E1%85%A7%E1%86%AB%E1%84%89%E1%85%A1%E1%86%AB%E1%84%8C%E1%85%A1%2014aa8/Untitled%206.png)
    
- getì— ë„˜ê²¨ì£¼ëŠ” ì¸ìì˜ ê°œìˆ˜ë‚˜ íƒ€ì…ì€ ìƒê´€ ì—†ë‹¤
    - operator fun get(rowIndex: Int, colIndex: Int)
- set(ë§ˆì§€ë§‰ ì¸ìê°€ ìƒˆë¡œìš´ ê°’ì´ë‹¤)
    
    ```kotlin
    data class MutablePoint(var x: Int, var y: Int)
    
    operator fun MutablePoint.set(index: Int, value: Int) {
    	when(index) {
    		0 -> x = value
    		1 -> y = value
    		else ->
    			throw IndexOutOfBoundsException("Invalid coordinate $index")
    	} 
    }
    >>> val p = MutablePoint(10, 20)
    >>> p[1] = 42
    >>> println(p)
    MutablePoint(x=10, y=42)
    ```
    

## 7.3.2 inê´€ë¡€

- ì›ì†Œê°€ ì»¬ë ‰ì…˜ì— ì†í•œì§€, ì˜¤ë¥¸ìª½ ê°ì²´ì˜ containsí•¨ìˆ˜ë¥¼ í˜¸ì¶œ, ì™¼ìª½ ê°ì²´ë¥¼ ì¸ìë¡œ ë„˜ê²¨ì¤Œ

```kotlin
data class Rectangle(val upperLeft: Point, val lowerRight: Point)

operator fun Rectangle.contains(p: Point): Boolean {
    // until standard library function to build open range
    return p.x in upperLeft.x until lowerRight.x &&
           p.y in upperLeft.y until lowerRight.y
}

// in
>>> val rect = Rectangle(Point(10, 20), Point(50, 50))
>>> println(Point(20, 30) in rect)
true

// in
>>> println(Point(5, 5) in rect)
false
```

- Open range: [0, 100)
    - until - 100ë¯¸ í¬í•¨
- Closed range: [0, 100]
    - ... - 100í¬í•¨

## 7.3.3 rangeToê´€ë¡€

- start..end: rangeë¥¼ ë§Œë“ ë‹¤. rangeToí•¨ìˆ˜ë¥¼ ì‚¬ìš©í•œë‹¤

```kotlin
operator fun <T: Comparable<T>> T.rangeTo(that: T): ClosedRange<T>
```

- Comparableì¸í„°í˜ì´ìŠ¤ë¥¼ ì§€ì›í•˜ë©´ ..ì„ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤

```kotlin
>>> val now = LocalDate.now()
>>> val vacation = now..now.plusDays(10)
>>> println(now.plusWeeks(1) in vacation)
true

// now.rangeTo (now.plusDays(10))
```

- Best Practice: ()ì‚¬ìš©

```kotlin
>>> val n = 9
>>> println(0..(n + 1))
0..10
```

- forEachì‚¬ìš©

```kotlin
>>> (0..n).forEach { print(it) }
0123456789
```

## 7.3.4 forë£¨í”„ë¥¼ ìœ„í•œ iteratorê´€ë¡€

- iteratorí•˜ê³  forë¬¸ì„ ì‚¬ìš©í•˜ë©´ iteratorì˜ hasNextë‘ nextí•¨ìˆ˜ë¥¼ í˜¸ì¶œ
    - in: ì»¬ë ‰ì…˜ì˜ containsí•˜ê³ ëŠ” ì¡°ê¸ˆ ë‹¤ë¥¸ ì˜ë¯¸
- kotlin standard library
    
    ```kotlin
    operator fun CharSequence.iterator(): CharIterator
    
    >>> for (c in "abc") {}
    ```
    
- iterator
    
    ```kotlin
    operator fun ClosedRange<LocalDate>.iterator(): Iterator<LocalDate> =
    	object : Iterator<LocalDate> {
    		var current = start
    		override fun hasNext() = current <= endInclusive
    		override fun next() = current.apply {
    		  current = plusDays(1)
    		}
    	}
    
    >>> val newYear = LocalDate.ofYearDay(2017, 1)
    >>> val daysOff = newYear.minusDays(1)..newYear
    >>> for (dayOff in daysOff) { println(dayOff) }
    2016-12-31
    2017-01-01
    ```
    

# 7.4 êµ¬ì¡° ë¶„í•´ ì„ ì–¸ê³¼ componentí•¨ìˆ˜

destructuring declaractions

```kotlin
>>> val p = Point(10, 20)
>>> val (x, y) = p
>>> println(x)
10
>>> println(y)
20
```

- ì»´íŒŒì¼ëŸ¬ê°€ componentN operatorí•¨ìˆ˜ë¥¼ ë§Œë“¤ì–´ì¤€ë‹¤
    
    ![Untitled](7%20%E1%84%8B%E1%85%A7%E1%86%AB%E1%84%89%E1%85%A1%E1%86%AB%E1%84%8C%E1%85%A1%2014aa8/Untitled%207.png)
    

```kotlin
class Point(val x: Int, val y: Int) {
    operator fun component1() = x
    operator fun component2() = y
}
```

- ì˜ˆì œ
    
    ```kotlin
    data class NameComponents(val name: String,
                              val extension: String)
    
    fun splitFilename(fullName: String): NameComponents {
        val result = fullName.split('.', limit = 2)
        return NameComponents(result[0], result[1])
    }
    
    >>> val (name, ext) = splitFilename("example.kt")
    >>> println(name)
    example
    >>> println(ext)
    kt
    
    // ê°œì„ 
    data class NameComponents(
            val name: String,
            val extension: String)
    fun splitFilename(fullName: String): NameComponents {
        val (name, extension) = fullName.split('.', limit = 2)
        return NameComponents(name, extension)
    }
    ```
    
- ì œì•½ ì¡°ê±´: 5ê°œ ê°’ê¹Œì§€ ì‚¬ìš© ê°€ëŠ¥
- Pair/Triple í´ë˜ìŠ¤ ì‚¬ìš© ê°€ëŠ¥

## 7.4.1 êµ¬ì¡° ë¶„í•´ ì„ ì–¸ê³¼ ë£¨í”„

- ì˜ˆì œ
    
    ```kotlin
    fun printEntries(map: Map<String, String>) {
        for ((key, value) in map) {
            println("$key -> $value")
        }
    }
    
    >>> val map = mapOf("Oracle" to "Java", "JetBrains" to "Kotlin")
    >>> printEntries(map)
    Oracle -> Java
    JetBrains -> Kotlin
    
    // í•´ì„
    for (entry in map.entries) {
                val key = entry.component1()
                val value = entry.component2()
                // ...
    }
    ```
    

# 7.5 í”„ë¡œí¼í‹° ì ‘ê·¼ì ë¡œì§ ì¬í™œìš©: ìœ„ì„ í”„ë¡œí¼í‹°

- backing fieldë¥¼ í†µí•´ ê°’ì„ ìƒíƒœ ê°’ìœ¼ë¡œ ë“¤ê³  ìˆëŠ” ê²ƒ ì´ìƒì˜ ê¸°ëŠ¥
- ìœ„ì„í•˜ëŠ”ê²Œ í•µì‹¬ì´ë‹¤
    - helper/delegate class

## 7.5.1 ìœ„ì„ í”„ë¡œí¼í‹° ì†Œê°œ

- ë¬¸ë²•(byí‚¤ì›Œë“œ)
    
    ```kotlin
    // ë¬¸ë²•, byí‚¤ì›Œë“œ
    class Foo {
    	var p: Type by Delegate()
    
    	// ì»´íŒŒì¼ëŸ¬ê°€ í•¼í¼ í”„ë¡œí¼í‹°ë¥¼ ë§Œë“¤ì–´ì¤€ë‹¤
    	private val delegate = Delegate()}
    	// ì»´íŒŒì¼ëŸ¬ê°€ ì ‘ê·¼ìë¥¼ ë§Œë“¤ì–´ì¤€ë‹¤
    	var p: Type
           set(value: Type) = delegate.setValue(..., value)
           get() = delegate.getValue(...)
    }
    ```
    
- Delegateì€ getValue()ë‘ setValue()í•¨ìˆ˜ê°€ ìˆì–´ì•¼í•œë‹¤
    
    ```kotlin
    class Delegate {
    	operator fun getValue(...) { ... }
    	operator fun setValue(..., value: Type) {...}
    }
    
    class Foo {
    	var p: Type by Delegate()
    }
    
    >>> val foo = Foo()
    >>> val oldValue = foo.p
    >>> foo.p = newValue //delegate.setValue(..., newValue)
    ```
    

## 7.5.2 ìœ„ì„ í”„ë¡œí¼í‹° ì‚¬ìš©: by lazy()ë¥¼ ì‚¬ìš©í•œ í”„ë¡œí¼í‹° ì´ˆê¸°í™” ì§€ì—°

- ì§€ì—° ìƒì„±. í”„ë¡œí¼í‹° ì²˜ìŒ ì ‘ê·¼í•  ë•Œ ìƒì„±ëœë‹¤
- ì˜ˆì œ(ì‚¬ìš©ì— ëŒ€í•œ use-case): ì´ë©”ì¼ ì¡°íšŒ
    
    ```kotlin
    class Email { /*...*/ }
    fun loadEmails(person: Person): List<Email> {
    	println("Load emails for ${person.name}")
    	return listOf(/*...*/)
    }
    
    class Person(val name: String) {
    	private var _emails: List<Email>? = null
    	val emails: List<Email>
    		get() {
    			if (_emails == null) {
    			   _emails = loadEmails(this)
    			}
    			return _emails!!
       }
    }
    
    >>> val p = Person("Alice")
    >>> p.emails
    Load emails for Alice
    >>> p.emails
    
    // lazy function
    // lazyê°€ ë°›ëŠ” ì¸ìëŠ” lambdaì´ë‹¤
    class Person(val name: String) {
        val emails by lazy { loadEmails(this) }
    }
    ```
    
- ê¸°ë³¸ì ìœ¼ë¡œ lazyëŠ” thread-safeì´ë‹¤
    - ì–´ë–¤ lockì„ ì‚¬ìš©í• ì§€ ì§€ì •í•  ìˆ˜ ìˆë‹¤
    - thread-safeë¥¼ ì‚¬ìš© ì•ˆí•´ë„ ëœë‹¤

## 7.5.3 ìœ„ì„ í”„ë¡œí¼í‹° êµ¬í˜„

- 

```kotlin
open class PropertyChangeAware {
  protected val changeSupport = PropertyChangeSupport(this)
  fun addPropertyChangeListener(listener: PropertyChangeListener) {
		changeSupport.addPropertyChangeListener(listener)
	}

	fun removePropertyChangeListener(listener: PropertyChangeListener) { 
		changeSupport.removePropertyChangeListener(listener)
	} 
}

class Person(
	val name: String, age: Int, salary: Int
) : PropertyChangeAware() {
    var age: Int = age
        set(newValue) {
            val oldValue = field
            field = newValue
            changeSupport.firePropertyChange("age", oldValue, newValue)
}

var salary: Int = salary
  set(newValue) {
      val oldValue = field
      field = newValue
      changeSupport.firePropertyChange("salary", oldValue, newValue)
	}
>>> val p = Person("Dmitry", 34, 2000)
>>> p.addPropertyChangeListener(
	PropertyChangeListener(
		PropertyChangeListener { event ->
			println("Property ${event.propertyName} changed " +)
		}
	)
... )

>>> p.age = 35
Property age changed from 34 to 35
>>> p.salary = 2100
Property salary changed from 2000 to 2100
```

## 7.5.4 ìœ„ì„ í”„ë¡œí¼í‹° ì»´íŒŒì¼ ê·œì¹™

- 

## 7.5.5 í”„ë¡œí¼í‹° ê°’ì„ ë§µì— ì €ì¥

- 

## 7.5.6 í”„ë ˆì„ì›Œí¬ì—ì„œ ìœ„ì„ í”„ë¡œí¼í‹° í™œìš©

- 

# 7.6 ìš”ì•½

## 6.4 ìš”ì•½

- ì½”í‹€ë¦°ì€ nullable typeì„ í†µí•´ ì»´íŒŒì¼í•  ë•Œ NullPointerExceptionê°€ëŠ¥í•œ ë¶€ë¶„ì„ ë¯¸ë¦¬ ê°ì§€í•  ìˆ˜ ìˆë‹¤
- ì½”í‹€ë¦°ì—ì„œ nullì§€ì›: ?., ?:, !!, let
- as?ë¥¼ í†µí•œ ìºìŠ¤íŒ…
- java â‡’ kotlin, platform type
- ìˆ«ìë“¤ì€ ì›ì‹œíƒ€ì…ìœ¼ë¡œ ì»´íŒŒì¼ ë  ìˆ˜ë„ ìˆë‹¤
- Nullable Type >>> Boxed Typeìœ¼ë¡œ ì»´íŒŒì¼(Int? > java.lang.Integer)
- AnyëŠ” Objectí•˜ê³  ë¹„ìŠ·í•˜ë‹¤
- Nothingì€ ì¢…ë£Œ ì•ˆë˜ëŠ” í•¨ìˆ˜ì˜ ë¦¬í„´ íƒ€ì…
- Kotlin collections: ì¸í„°í˜ì´ìŠ¤ë¥¼ í†µí•´ ìë°” ì»¬ë ‰ì…˜ì„ ì ‘ê·¼(ì½ê¸°/ë³€ê²½)
- Java/Kotlinì„ ê°™ì´ ì‚¬ìš©í•  ê²½ìš° ì¸í„°í˜ì´ìŠ¤ implementationì„ ì‹ ê²½ ì¨ì•¼í•¨
- Kotlin ArrayëŠ” ê¸°ë³¸ ì œë„¤ë¦­ í´ë˜ìŠ¤ ê°™ì§€ë§Œ ìë°” arrayë¡œ ì»´íŒŒì¼ ë¨
- ì›ì‹œíƒ€ì…ì¸ ArrayëŠ” IntArrayê°™ì€ í´ë˜ìŠ¤ê°€ ìˆìŒ